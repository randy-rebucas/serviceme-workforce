<ion-item lines="none">
    <ion-label>Search</ion-label>
    <ion-searchbar (ionChange)="onChange($event)" (ionClear)="onClear()"></ion-searchbar>
</ion-item>
<ng-container *ngIf="users$ | async; let users; else loadingUsers">
    <ion-virtual-scroll [items]="users" approxItemHeight="320px">
        <ion-item-sliding *virtualItem="let item; let itemBounds = bounds;" #slidingItem>
            <ion-item lines="none" button (click)="onDeail(item, slidingItem)">
                <ion-thumbnail slot="start">
                    <ng-container *ngIf="item.photoURL; else elseDummy">
                        <img [src]="item.photoURL" />
                    </ng-container>
                    <ng-template #elseDummy>
                        <ion-img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSIjYzVkYmZmIiBkPSJNMCAwaDUxMnY1MTJIMHoiLz48cGF0aCBkPSJNMjU2IDMwNGM2MS42IDAgMTEyLTUwLjQgMTEyLTExMlMzMTcuNiA4MCAyNTYgODBzLTExMiA1MC40LTExMiAxMTIgNTAuNCAxMTIgMTEyIDExMnptMCA0MGMtNzQuMiAwLTIyNCAzNy44LTIyNCAxMTJ2NTZoNDQ4di01NmMwLTc0LjItMTQ5LjgtMTEyLTIyNC0xMTJ6IiBmaWxsPSIjODJhZWZmIi8+PC9zdmc+"></ion-img>
                    </ng-template>
                </ion-thumbnail>
                <ion-label>
                    <h2>{{ (item.name.firstname + ' ' + item.name.lastname) | titlecase }} <small>- {{ item.classification }}</small></h2>
                    <ion-chip outline>
                        <ion-label>{{ item.id | counter:'single':'Service' | async}}</ion-label>
                    </ion-chip>
                    <ion-chip outline>
                        <ion-label>{{ item.id | counter:'package':'Package' | async}}</ion-label>
                    </ion-chip>
                </ion-label>
                <ion-note slot="end" [ngClass]="{'available': item.availability | weekDay}"></ion-note>
            </ion-item>
        </ion-item-sliding>
    </ion-virtual-scroll>
</ng-container>
<ng-template #loadingUsers>
    <ion-item lines="none" *ngFor="let item of [1,2,3,4,5,6,7]">
        <ion-thumbnail slot="start">
            <ion-skeleton-text animated></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label>
            <h3>
                <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
            </h3>
            <ion-chip outline>
                <ion-label>
                    <ion-skeleton-text animated></ion-skeleton-text>
                </ion-label>
            </ion-chip>
            <ion-chip outline>
                <ion-label>
                    <ion-skeleton-text animated></ion-skeleton-text>
                </ion-label>
            </ion-chip>
        </ion-label>
    </ion-item>
</ng-template>


<!-- <ion-list>
    <ng-container *ngIf="users$ | async; let users; else loadingUsers">
        <ion-item-sliding *ngFor="let item of users" #slidingItem>
            <ion-item lines="none" button (click)="onDeail(item, slidingItem)" detail>
                <ion-thumbnail slot="start">
                    <ng-container *ngIf="item.photoURL; else elseDummy">
                        <img [src]="item.photoURL" />
                    </ng-container>
                    <ng-template #elseDummy>
                        <ion-img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSIjYzVkYmZmIiBkPSJNMCAwaDUxMnY1MTJIMHoiLz48cGF0aCBkPSJNMjU2IDMwNGM2MS42IDAgMTEyLTUwLjQgMTEyLTExMlMzMTcuNiA4MCAyNTYgODBzLTExMiA1MC40LTExMiAxMTIgNTAuNCAxMTIgMTEyIDExMnptMCA0MGMtNzQuMiAwLTIyNCAzNy44LTIyNCAxMTJ2NTZoNDQ4di01NmMwLTc0LjItMTQ5LjgtMTEyLTIyNC0xMTJ6IiBmaWxsPSIjODJhZWZmIi8+PC9zdmc+"></ion-img>
                    </ng-template>
                </ion-thumbnail>
                <ion-label>
                    <h2>{{ (item.name.firstname + ' ' + item.name.lastname) | titlecase }} <small>- {{ item.classification }}</small></h2>
                    <ion-chip outline>
                        <ion-label>{{ item.id | counter:'single':'Service' | async}}</ion-label>
                    </ion-chip>
                    <ion-chip outline>
                        <ion-label>{{ item.id | counter:'package':'Package' | async}}</ion-label>
                    </ion-chip>
                </ion-label>
                <ion-note slot="end" [ngClass]="{'available': item.availability | weekDay}"></ion-note>
            </ion-item>
            <ion-item lines="full" class="ion-no-margin desc">
                <ion-label class="ion-text-wrap">
                    <p>{{item.id | bookingCounter:'completed':'job' | async | titlecase}}
                        <span>{{item.id | bookingCounter:'completed':'earnings' | async}}</span>
                    </p>
                </ion-label>
            </ion-item>
        </ion-item-sliding>

        <ion-infinite-scroll threshold="100px" (ionInfinite)="doInfinite($event)">
            <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data..."></ion-infinite-scroll-content>
        </ion-infinite-scroll>

        <ion-item lines="none" color="secondary" class="ion-text-center" *ngIf="users.length === 0">
            <ion-label>
                <h2>No users found</h2>
            </ion-label>
        </ion-item>
    </ng-container>
    <ng-template #loadingUsers>
        <ion-item lines="none" *ngFor="let item of [1,2,3,4,5,6,7]">
            <ion-thumbnail slot="start">
                <ion-skeleton-text animated></ion-skeleton-text>
            </ion-thumbnail>
            <ion-label>
                <h3>
                    <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
                </h3>
                <ion-chip outline>
                    <ion-label>
                        <ion-skeleton-text animated></ion-skeleton-text>
                    </ion-label>
                </ion-chip>
                <ion-chip outline>
                    <ion-label>
                        <ion-skeleton-text animated></ion-skeleton-text>
                    </ion-label>
                </ion-chip>
            </ion-label>
        </ion-item>
    </ng-template>
</ion-list> -->